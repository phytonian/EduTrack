{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h2>Notifications</h2>
    
    <ul class="nav nav-tabs" id="notificationTabs" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="unread-tab" data-toggle="tab" href="#unread" role="tab">Unread</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="all-tab" data-toggle="tab" href="#all" role="tab">All</a>
        </li>
    </ul>
    
    <div class="tab-content" id="notificationTabContent">
        <div class="tab-pane fade show active" id="unread" role="tabpanel">
            {% for notification in unread_notifications %}
            <div class="card mb-2">
                <div class="card-body">
                    <h5>{{ notification.title }}</h5>
                    <p>{{ notification.message }}</p>
                    <small>{{ notification.created_at|timesince }} ago</small>
                    <a href="{% url 'mark_notification_read' notification.id %}" class="btn btn-sm btn-primary float-right">Mark as Read</a>
                </div>
            </div>
            {% empty %}
            <p>No unread notifications</p>
            {% endfor %}
        </div>
        
        <div class="tab-pane fade" id="all" role="tabpanel">
            {% for notification in all_notifications %}
            <div class="card mb-2">
                <div class="card-body">
                    <h5>{{ notification.title }}</h5>
                    <p>{{ notification.message }}</p>
                    <small>{{ notification.created_at|date }}</small>
                    <span class="badge badge-{% if notification.is_read %}secondary{% else %}primary{% endif %} float-right">
                        {% if notification.is_read %}Read{% else %}Unread{% endif %}
                    </span>
                </div>
            </div>
            {% empty %}
            <p>No notifications</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}